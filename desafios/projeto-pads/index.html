<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="imagens/favicon.ico" type="image/x-icon">
    <title>App|PADS</title>
</head>
<body>
    <main>
        <a data-som="C">
            <h1>C</h1>
        </a>
        <a data-som="D">
            <h1>D</h1>
        </a>
        <a data-som="E">
            <h1>E</h1>
        </a>
        <a data-som="F">
            <h1>F</h1>
        </a>
        <a data-som="G">
            <h1>G</h1>
        </a>
        <a data-som="A">
            <h1>A</h1>
        </a>
        <a data-som="B">
            <h1>B</h1>
        </a>
        <a data-som="Cs">
            <h1>C#</h1>
        </a>
        <a data-som="Ds">
            <h1>D#</h1>
        </a>
        <a data-som="Fs">
            <h1>F#</h1>
        </a>
        <a data-som="Gs">
            <h1>G#</h1>
        </a>
        <a data-som="As">
            <h1>A#</h1>
        </a>
    </main>
        <script>
  const audios = {};

  // üéöÔ∏è Fun√ß√£o de fade-in suave
  function fadeIn(audio, el, step = 0.05, interval = 30) {
    audio.volume = 0;
    audio.play();
    el.classList.add("ativo");

    const fade = setInterval(() => {
      if (audio.volume < 1 - step) {
        audio.volume += step;
      } else {
        audio.volume = 1;
        clearInterval(fade);
      }
    }, interval);
  }

  // üéöÔ∏è Fun√ß√£o de fade-out suave
  function fadeOutAndPause(audio, el, step = 0.05, interval = 30) {
    const fade = setInterval(() => {
      if (audio.volume > step) {
        audio.volume -= step;
      } else {
        audio.volume = 1;
        audio.pause();
        audio.currentTime = 0;
        el.classList.remove("ativo");
        clearInterval(fade);
      }
    }, interval);
  }

  // üëá Atribui delay na entrada suave dos pads
  window.addEventListener('DOMContentLoaded', () => {
    const pads = document.querySelectorAll('a[data-som]');
    pads.forEach((pad, index) => {
      pad.style.animationDelay = `${index * 0.05}s`;
    });
  });

  // üéº L√≥gica principal dos pads musicais
  document.querySelectorAll('a[data-som]').forEach(pad => {
    pad.addEventListener('click', function (e) {
      e.preventDefault();
      const nota = this.getAttribute('data-som');

      if (!audios[nota]) {
        audios[nota] = new Audio(`sounds/${nota}.mp3`);
        audios[nota].loop = false; // Se quiser loop, mude para true
      }

      const audio = audios[nota];

      if (!audio.paused) {
        fadeOutAndPause(audio, this);
      } else {
        audio.currentTime = 0;
        fadeIn(audio, this); // ‚¨ÖÔ∏è Aqui entra o fade-in
      }
    });
  });
</script>

</body>
</html>